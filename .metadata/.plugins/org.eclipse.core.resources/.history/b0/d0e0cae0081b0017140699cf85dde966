package Problems;

public class MedianTwoArrays {
	public static double findMedianSortedArrays(int[] nums1, int[] nums2) {

		if (nums1.length < 1 && nums2.length < 1) {
			return 0;
		} else if (nums1.length < 1) {
			return findMedian(nums2);
		} else if (nums2.length < 1) {
			return findMedian(nums1);
		}

		if (nums1[nums1.length-1] <= nums2[0]) {
			return combineMedian(nums1, nums2);
		} else if (nums2[nums2.length-1] <= nums1[0]) {
			return combineMedian(nums2, nums1);
		}


		double med1 = findMedian(nums1);
		double med2 = findMedian(nums2);

		

		if (nums1.length == 1 && nums2.length ==1) {
			return ((double) nums1[0] + (double) nums2[0])/2;
		}

		int[] newNums1 = new int[nums1.length/2 + (nums1.length % 2 == 0 ? 0:1) ]; 
		int[] newNums2 = new int[nums2.length/2 + (nums2.length % 2 == 0 ? 0:1) ]; 
		if (med1 > med2) {
			System.arraycopy(nums1, 0, newNums1, 0, (nums1.length)/2 + (nums1.length % 2 == 0 ? 0:1));
			System.arraycopy(nums2, nums2.length/2, newNums2, 0, (nums2.length)/2 + (nums2.length % 2 == 0 ? 0:1) );
		} else {
			System.arraycopy(nums2, 0, newNums2, 0, (nums2.length)/2 + (nums2.length % 2 == 0 ? 0:1) );
			System.arraycopy(nums1, nums1.length/2, newNums1, 0, (nums1.length)/2 + (nums1.length % 2 == 0 ? 0:1) );
		}

		return findMedianSortedArrays(newNums1, newNums2);

	}


	public static double findMedian(int[] nums) {
		if (nums.length % 2 == 0) {
			return (double) (nums[(nums.length)/2] + (double) nums[(nums.length)/2 - 1])/2;
		} else {
			return (double) nums[(nums.length)/2];
		}
	}

	public static void main(String[] args) {
		int[] nums1 = new int[]{2};
		int[] nums2 = new int[]{1,3,4};

		System.out.println(findMedianSortedArrays(nums1, nums2));

	}

	public static double combineMedian(int[] nums1, int[] nums2) {
		int[] combinedArray = new int[nums1.length + nums2.length];
		for (int i = 0; i < nums1.length; i++) {
			combinedArray[i] = nums1[i];
		}
		for (int i = 0; i < nums2.length; i++) {
			combinedArray[i + nums1.length] = nums2[i];
		}
		
		return findMedian(combinedArray);
	}
}